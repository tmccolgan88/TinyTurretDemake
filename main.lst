                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.1.6 #12439 (MINGW32)
                                      4 ;--------------------------------------------------------
                                      5 	.module main
                                      6 	.optsdcc -mgbz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _main
                                     12 	.globl _initializePlayer
                                     13 	.globl _playerUpdate
                                     14 	.globl _malloc
                                     15 	.globl _printf
                                     16 	.globl _set_sprite_data
                                     17 	.globl _delay
                                     18 	.globl _Turret
                                     19 ;--------------------------------------------------------
                                     20 ; special function registers
                                     21 ;--------------------------------------------------------
                                     22 ;--------------------------------------------------------
                                     23 ; ram data
                                     24 ;--------------------------------------------------------
                                     25 	.area _DATA
                                     26 ;--------------------------------------------------------
                                     27 ; ram data
                                     28 ;--------------------------------------------------------
                                     29 	.area _INITIALIZED
      000000                         30 _Turret::
      000000                         31 	.ds 16
                                     32 ;--------------------------------------------------------
                                     33 ; absolute external ram data
                                     34 ;--------------------------------------------------------
                                     35 	.area _DABS (ABS)
                                     36 ;--------------------------------------------------------
                                     37 ; global & static initialisations
                                     38 ;--------------------------------------------------------
                                     39 	.area _HOME
                                     40 	.area _GSINIT
                                     41 	.area _GSFINAL
                                     42 	.area _GSINIT
                                     43 ;--------------------------------------------------------
                                     44 ; Home
                                     45 ;--------------------------------------------------------
                                     46 	.area _HOME
                                     47 	.area _HOME
                                     48 ;--------------------------------------------------------
                                     49 ; code
                                     50 ;--------------------------------------------------------
                                     51 	.area _CODE
                                     52 ;player.c:18: int playerUpdate(){
                                     53 ;	---------------------------------
                                     54 ; Function playerUpdate
                                     55 ; ---------------------------------
      000000                         56 _playerUpdate::
                                     57 ;c:/gbdk/include/gb/gb.h:1263: OAM_item_t * itm = &shadow_OAM[nb];
      000000 01r00r00                58 	ld	bc, #_shadow_OAM+0
                                     59 ;c:/gbdk/include/gb/gb.h:1264: itm->y+=y, itm->x+=x;
      000003 0A                      60 	ld	a, (bc)
      000004 3C                      61 	inc	a
      000005 02                      62 	ld	(bc), a
      000006 03                      63 	inc	bc
      000007 0A                      64 	ld	a, (bc)
      000008 3C                      65 	inc	a
      000009 02                      66 	ld	(bc), a
                                     67 ;player.c:20: return 0;
      00000A 11 00 00                68 	ld	de, #0x0000
                                     69 ;player.c:21: }
      00000D C9                      70 	ret
                                     71 ;player.c:23: Player *initializePlayer(){
                                     72 ;	---------------------------------
                                     73 ; Function initializePlayer
                                     74 ; ---------------------------------
      00000E                         75 _initializePlayer::
                                     76 ;player.c:24: Player * p = malloc(sizeof(Player));
      00000E 11 0D 00                77 	ld	de, #0x000d
      000011 D5                      78 	push	de
      000012 CDr00r00                79 	call	_malloc
      000015 E1                      80 	pop	hl
                                     81 ;player.c:25: p->canFire = true;
      000016 21 04 00                82 	ld	hl, #0x0004
      000019 19                      83 	add	hl, de
      00001A 36 00                   84 	ld	(hl), #0x00
                                     85 ;player.c:26: p->timeSinceLastUpdate = 100;
      00001C 21 09 00                86 	ld	hl, #0x0009
      00001F 19                      87 	add	hl, de
      000020 3E 64                   88 	ld	a, #0x64
      000022 22                      89 	ld	(hl+), a
      000023 36 00                   90 	ld	(hl), #0x00
                                     91 ;player.c:27: p->xVelocity = 1;
      000025 21 05 00                92 	ld	hl, #0x0005
      000028 19                      93 	add	hl, de
      000029 3E 01                   94 	ld	a, #0x01
      00002B 22                      95 	ld	(hl+), a
      00002C 36 00                   96 	ld	(hl), #0x00
                                     97 ;player.c:28: p->yVelocity = 0;
      00002E 21 07 00                98 	ld	hl, #0x0007
      000031 19                      99 	add	hl, de
      000032 AF                     100 	xor	a, a
      000033 22                     101 	ld	(hl+), a
      000034 77                     102 	ld	(hl), a
                                    103 ;player.c:29: p->playerUpdate = playerUpdate;
      000035 21 0B 00               104 	ld	hl, #0x000b
      000038 19                     105 	add	hl, de
      000039 4D                     106 	ld	c, l
      00003A 44                     107 	ld	b, h
      00003B 36r00                  108 	ld	(hl), #<(_playerUpdate)
      00003D 03                     109 	inc	bc
      00003E 3Es00                  110 	ld	a, #>(_playerUpdate)
      000040 02                     111 	ld	(bc), a
                                    112 ;player.c:30: set_sprite_data(0,1,Turret);
      000041 D5                     113 	push	de
      000042 01r00r00               114 	ld	bc, #_Turret
      000045 C5                     115 	push	bc
      000046 AF                     116 	xor	a, a
      000047 3C                     117 	inc	a
      000048 F5                     118 	push	af
      000049 CDr00r00               119 	call	_set_sprite_data
      00004C E8 04                  120 	add	sp, #4
      00004E D1                     121 	pop	de
                                    122 ;c:/gbdk/include/gb/gb.h:1174: shadow_OAM[nb].tile=tile;
      00004F 01r02r00               123 	ld	bc, #_shadow_OAM+2
      000052 AF                     124 	xor	a, a
      000053 02                     125 	ld	(bc), a
                                    126 ;c:/gbdk/include/gb/gb.h:1247: OAM_item_t * itm = &shadow_OAM[nb];
      000054 21r00r00               127 	ld	hl, #_shadow_OAM
                                    128 ;c:/gbdk/include/gb/gb.h:1248: itm->y=y, itm->x=x;
      000057 3E 32                  129 	ld	a, #0x32
      000059 22                     130 	ld	(hl+), a
      00005A 36 32                  131 	ld	(hl), #0x32
                                    132 ;player.c:34: return p; 
                                    133 ;player.c:35: }
      00005C C9                     134 	ret
                                    135 ;main.c:6: void main(){
                                    136 ;	---------------------------------
                                    137 ; Function main
                                    138 ; ---------------------------------
      00005D                        139 _main::
      00005D 3B                     140 	dec	sp
      00005E 3B                     141 	dec	sp
                                    142 ;main.c:8: SHOW_SPRITES;
      00005F F0r00                  143 	ldh	a, (_LCDC_REG + 0)
      000061 F6 02                  144 	or	a, #0x02
      000063 E0r00                  145 	ldh	(_LCDC_REG + 0), a
                                    146 ;main.c:10: Player *p = initializePlayer();
      000065 CDr0Er00               147 	call	_initializePlayer
      000068 4B                     148 	ld	c, e
      000069 42                     149 	ld	b, d
                                    150 ;main.c:12: printf("%i", p->timeSinceLastUpdate);
      00006A 21 09 00               151 	ld	hl, #0x0009
      00006D 09                     152 	add	hl, bc
      00006E 5D                     153 	ld	e, l
      00006F 54                     154 	ld	d, h
      000070 1A                     155 	ld	a, (de)
      000071 F8 00                  156 	ldhl	sp,	#0
      000073 22                     157 	ld	(hl+), a
      000074 13                     158 	inc	de
      000075 1A                     159 	ld	a, (de)
      000076 77                     160 	ld	(hl), a
      000077 C5                     161 	push	bc
      000078 F8 02                  162 	ldhl	sp,	#2
      00007A 2A                     163 	ld	a, (hl+)
      00007B 5F                     164 	ld	e, a
      00007C 56                     165 	ld	d, (hl)
      00007D D5                     166 	push	de
      00007E 11rABr00               167 	ld	de, #___str_0
      000081 D5                     168 	push	de
      000082 CDr00r00               169 	call	_printf
      000085 E8 04                  170 	add	sp, #4
      000087 11 B8 0B               171 	ld	de, #0x0bb8
      00008A D5                     172 	push	de
      00008B CDr00r00               173 	call	_delay
      00008E E1                     174 	pop	hl
      00008F C1                     175 	pop	bc
                                    176 ;main.c:14: while(1){
      000090                        177 00102$:
                                    178 ;main.c:16: delay(500);
      000090 C5                     179 	push	bc
      000091 11 F4 01               180 	ld	de, #0x01f4
      000094 D5                     181 	push	de
      000095 CDr00r00               182 	call	_delay
      000098 E1                     183 	pop	hl
      000099 C1                     184 	pop	bc
                                    185 ;main.c:17: p->playerUpdate();
      00009A 21 0B 00               186 	ld	hl, #0x000b
      00009D 09                     187 	add	hl, bc
      00009E 2A                     188 	ld	a,	(hl+)
      00009F 66                     189 	ld	h, (hl)
                                    190 ;	spillPairReg hl
      0000A0 6F                     191 	ld	l, a
                                    192 ;	spillPairReg hl
                                    193 ;	spillPairReg hl
      0000A1 C5                     194 	push	bc
      0000A2 CDr00r00               195 	call	___sdcc_call_hl
      0000A5 C1                     196 	pop	bc
      0000A6 18 E8                  197 	jr	00102$
                                    198 ;main.c:21: }
      0000A8 33                     199 	inc	sp
      0000A9 33                     200 	inc	sp
      0000AA C9                     201 	ret
      0000AB                        202 ___str_0:
      0000AB 25 69                  203 	.ascii "%i"
      0000AD 00                     204 	.db 0x00
                                    205 	.area _CODE
                                    206 	.area _INITIALIZER
      000000                        207 __xinit__Turret:
      000000 3C                     208 	.db #0x3c	; 60
      000001 3C                     209 	.db #0x3c	; 60
      000002 18                     210 	.db #0x18	; 24
      000003 18                     211 	.db #0x18	; 24
      000004 18                     212 	.db #0x18	; 24
      000005 18                     213 	.db #0x18	; 24
      000006 18                     214 	.db #0x18	; 24
      000007 18                     215 	.db #0x18	; 24
      000008 FF                     216 	.db #0xff	; 255
      000009 FF                     217 	.db #0xff	; 255
      00000A BD                     218 	.db #0xbd	; 189
      00000B C3                     219 	.db #0xc3	; 195
      00000C BD                     220 	.db #0xbd	; 189
      00000D C3                     221 	.db #0xc3	; 195
      00000E FF                     222 	.db #0xff	; 255
      00000F FF                     223 	.db #0xff	; 255
                                    224 	.area _CABS (ABS)
